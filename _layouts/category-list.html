---
layout: page
---

{%- assign categories = site.categories | sort -%}
{%- assign cc_a = site.wren.category_cloud.a | default: 15 -%}
{%- assign cc_b = site.wren.category_cloud.b | default: 80 -%}

<div class="category-page">

<div class="category-cloud">
  {%- for category in categories -%}
    {%- assign category_name = category[0] -%}
    {%- assign category_count = category | last | size -%}
    {%comment%}
      The font size of each category is calculated using (a*x + b)%, where
      x is the number of posts in that category. This means that as x gets
      bigger the values of a and b in config.yml might need tweaking.
    {%endcomment%}  
    {%- assign style = category_count | times: cc_a | plus: cc_b | prepend: 'style="font-size: ' | append: '%;"' -%}
    <a href={{ category_name | prepend: '#' }} {{ style }} title="{{ category_count }} posts">{{ category_name | replace:'-', ' ' }}</a>
    {%- if forloop.last == false %}, {% endif -%}
  {%- endfor -%}
</div>

{%comment%} allows for preface before category list {%endcomment%}
{{ content }}

{%- for category in categories -%}
  {%- capture category_name -%}
    {{ category | first }}
  {%- endcapture -%}
  <h2 class="category-header">
    <a id={{ category_name }} href={{ category_name | prepend: '#' }}>
      {{ category_name }}
    </a>
  </h2>

  <ul class="post-list">
  {%- for post in site.categories[category_name] -%}
    <li>
      <a class="post-link" href="{{ post.url | relative_url }}">
        {{ post.title | escape }}
      </a>
      {%- include meta.html -%}
      {%- if site.show_excerpts -%}
        {{ post.excerpt }}
      {%- endif -%}
    </li>
  {%- endfor -%}
  </ul>
{%- endfor -%}

</div>
